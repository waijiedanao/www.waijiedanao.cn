webpackJsonp([8],{WBnR:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("lC5x"),i=e.n(n),c=e("J0Oq"),s=e.n(c),r=e("f744"),o=e("4YfN"),l=e.n(o),u=e("ryJa"),p=e.n(u),v={data:function(){return{pageNo:1,pageLimit:10,totalPage:1,publicAccountId:"",accountDetail:{},articalList:[],tabIndex:0,searchText:""}},computed:{},components:{},created:function(){this.init()},methods:{init:function(){var t=this;return s()(i.a.mark(function a(){return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t.publicAccountId=t.$route.query.publicAccountId,t.getAccountDetail(),a.next=4,t.getArticalList();case 4:t.articalList=a.sent;case 5:case"end":return a.stop()}},a,t)}))()},getArticalList:function(t){var a=this;return s()(i.a.mark(function e(){var n,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.$http.get(a.serverPath.getArticalList,l()({},t,{page:a.pageNo,limit:a.pageLimit,profile:a.publicAccountId,q:a.searchText,isOriginal:!!a.tabIndex}));case 2:return n=e.sent,a.totalPage=n.metadata.totalPage,c=n.data.map(function(t){return t.publishAt=p()(t.publishAt).format("YYYY年MM月DD日"),t}),e.abrupt("return",c);case 6:case"end":return e.stop()}},e,a)}))()},getAccountDetail:function(){var t=this;return s()(i.a.mark(function a(){var e;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.$http.get(t.serverPath.publickAccountDetail+"/"+t.publicAccountId,{});case 2:e=a.sent,t.accountDetail=e.data;case 4:case"end":return a.stop()}},a,t)}))()},searchArticalList:function(){var t=this;return s()(i.a.mark(function a(){return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t.pageNo=1,a.next=3,t.getArticalList();case 3:t.articalList=a.sent;case 4:case"end":return a.stop()}},a,t)}))()},tabclick:function(t){var a=this;return s()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.pageNo=1,a.tabIndex=t,e.next=4,a.getArticalList();case 4:a.articalList=e.sent;case 5:case"end":return e.stop()}},e,a)}))()},changeFollowAccount:function(t){var a=this;return s()(i.a.mark(function e(){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.serverPath.followAccount,t.isFollow&&(n=a.serverPath.unfollowAcount),e.next=4,a.$http.post(n+t.id,{});case 4:t.isFollow=!t.isFollow;case 5:case"end":return e.stop()}},e,a)}))()}},mounted:function(){}},d={data:function(){return{}},mixins:[r.a,v],mounted:function(){},methods:{loadMore:function(){var t=this;return s()(i.a.mark(function a(){return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.getArticalList();case 2:t.articalList=a.sent;case 3:case"end":return a.stop()}},a,t)}))()}},components:{}},f={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"account-artical-page"},[e("nav-bar",{attrs:{showSecondNav:!0}}),t._v(" "),e("div",{staticClass:"container main-content"},[e("header",[e("div",{staticClass:"header-top"}),t._v(" "),e("div",{staticClass:"header-bottom"},[e("div",[e("img",{staticClass:"artical-portrait",attrs:{src:t.accountDetail.headimg,alt:""}}),t._v(" "),e("div",{staticClass:"account-name"},[t._v(t._s(t.accountDetail.title))])]),t._v(" "),e("el-button",{staticClass:"focus-btn",attrs:{type:t.accountDetail.isFollow?"info":"primary"},on:{click:function(a){return t.changeFollowAccount(t.accountDetail)}}},[t._v(t._s(t.accountDetail.isFollow?"已关注":"关注"))])],1)]),t._v(" "),e("el-row",{staticClass:"artical-container",attrs:{gutter:30}},[e("el-col",{staticClass:"left-box-container",attrs:{span:17}},[e("div",{staticClass:"left-box"},[e("div",{staticClass:"tab-bar"},[e("span",{class:0==t.tabIndex?"active":"",on:{click:function(a){return t.tabclick(0)}}},[t._v("全部")]),t._v(" "),e("span",{class:1==t.tabIndex?"active":"",on:{click:function(a){return t.tabclick(1)}}},[t._v("原创")])]),t._v(" "),e("div",{staticClass:"page-list"},[t._l(t.articalList,function(a,n){return e("a",{key:n,staticClass:"list-item",on:{click:function(e){return t.$router.push({path:"/articalDetail",query:{path:a.link}})}}},[e("el-row",{attrs:{gutter:30}},[e("el-col",{attrs:{span:16}},[e("div",{staticClass:"item-title"},[t._v("\n                                          "+t._s(a.title)+"\n                                      ")]),t._v(" "),e("div",{staticClass:"item-text"},[t._v("\n                                          "+t._s(a.digest)+"\n                                      ")]),t._v(" "),e("div",{staticClass:"item-time"},[t._v("\n                                          "+t._s(a.publishAt)+" "),a.isOriginal?e("span",{staticClass:"tag"},[t._v("原创")]):t._e()])]),t._v(" "),e("el-col",{attrs:{span:8}},[e("div",{staticClass:"item-img",style:{"background-image":"url("+a.cover+")"}})])],1)],1)}),t._v(" "),e("el-pagination",{staticClass:"pagination",attrs:{background:"","prev-text":"上一页","next-text":"下一页",layout:"prev, pager, next","current-page":t.pageNo,"page-count":t.totalPage},on:{"update:currentPage":function(a){t.pageNo=a},"update:current-page":function(a){t.pageNo=a},"current-change":t.loadMore}})],2)])]),t._v(" "),e("el-col",{attrs:{span:7}},[e("div",{staticClass:"right-box"},[e("el-input",{staticClass:"search-input",attrs:{placeholder:"请输入关键字"},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.searchArticalList(a)}},model:{value:t.searchText,callback:function(a){t.searchText=a},expression:"searchText"}},[e("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},slot:"suffix"})]),t._v(" "),e("div",{staticClass:"brief-introduction"},[e("div",{staticClass:"part-title"},[t._v("简介")]),t._v(" "),e("div",{staticClass:"introduction"},[t._v("\n                             "+t._s(t.accountDetail.desc)+"\n                          ")])]),t._v(" "),e("div",{staticClass:"qr-code"},[e("div",{staticClass:"part-title"},[t._v("二维码")]),t._v(" "),e("div",{staticClass:"code-img"},[e("img",{attrs:{src:t.accountDetail.qrcode,alt:""}})])])],1)])],1)],1)],1)},staticRenderFns:[]};var g=e("C7Lr")(d,f,!1,function(t){e("zZLd")},null,null);a.default=g.exports},zZLd:function(t,a){}});